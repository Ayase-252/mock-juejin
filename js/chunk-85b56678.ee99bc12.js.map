{"version":3,"sources":["webpack:///./src/views/Post.vue?eb65","webpack:///./src/components/business/content-table/ContentTable.vue?a325","webpack:///src/components/business/content-table/ContentTable.vue","webpack:///./src/components/business/content-table/ContentTable.vue?3648","webpack:///./src/components/business/content-table/ContentTable.vue","webpack:///./src/components/business/content-viewer/ContentViewer.vue?6dea","webpack:///./src/libs/debounce.js","webpack:///src/components/business/content-viewer/ContentViewer.vue","webpack:///./src/components/business/content-viewer/ContentViewer.vue?2e78","webpack:///./src/components/business/content-viewer/ContentViewer.vue","webpack:///./src/libs/heading-parser.js","webpack:///src/views/Post.vue","webpack:///./src/views/Post.vue?8ad2","webpack:///./src/views/Post.vue","webpack:///./node_modules/core-js/modules/es6.regexp.constructor.js","webpack:///./src/components/business/content-viewer/ContentViewer.vue?75e1","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./src/views/Post.vue?463f","webpack:///./src/components/business/content-table/ContentTable.vue?51d4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","content","on","active-heading-change","onActiveHeadingChange","headings","staticRenderFns","ContentTablevue_type_template_id_5486b68c_render","class","content-table-wrapper","level","_l","heading","key","levelClass","active","isActive","href","_v","_s","subHeadings","length","_e","ContentTablevue_type_template_id_5486b68c_staticRenderFns","ContentTablevue_type_script_lang_js_","name","props","Array","default","type","Number","computed","concat","content_table_ContentTablevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","ContentTable","ContentViewervue_type_template_id_221928d8_render","ref","domProps","innerHTML","ContentViewervue_type_template_id_221928d8_staticRenderFns","debounce","fn","interval","config","lastCallTime","Date","maxInterval","maxWait","clearTimeout","tid","now","setTimeout","ContentViewervue_type_script_lang_js_","data","offsets","targets","activeTargetIdx","onScrollHandler","methods","parseHeadingPosition","_this","document","querySelectorAll","forEach","elem","setAttribute","push","offsetTop","notifyActiveHeading","$emit","watch","oldVal","newVal","mounted","_this2","onScroll","scrollY","window","numHeadings","libs_debounce","addEventListener","updated","beforeDestroy","removeEventListener","content_viewer_ContentViewervue_type_script_lang_js_","ContentViewer_component","ContentViewer","uid","createHeading","identifier","arguments","undefined","parseHeadings","htmlFrag","currLvl","reg","RegExp","res","lastMatchEnd","match","exec","updateSubHeadingsOfLastMatch","lastMatch","slice","index","lastIndex","Postvue_type_script_lang_js_","activeHeading","headingMap","components","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","dfs","post","wrap","_context","prev","next","node","api","getPost","$route","params","id","sent","heading_parser","stop","apply","views_Postvue_type_script_lang_js_","Post_component","__webpack_exports__","global","__webpack_require__","inheritIfRequired","dP","f","gOPN","isRegExp","$flags","$RegExp","Base","proto","prototype","re1","re2","CORRECT_NEW","p","tiRE","piRE","fiU","constructor","source","call","proxy","configurable","get","set","it","keys","i","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentViewer_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentViewer_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","isObject","cof","MATCH","module","exports","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Post_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Post_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentTable_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentTable_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-85b56678.ee99bc12.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-wrapper\"},[_c('div',{staticClass:\"post-left-col\"},[_c('content-viewer',{attrs:{\"title\":_vm.title,\"content\":_vm.content},on:{\"active-heading-change\":_vm.onActiveHeadingChange}})],1),_c('div',{staticClass:\"post-right-col\"},[_c('content-table',{attrs:{\"headings\":_vm.headings}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"content-table\",class:{'content-table-wrapper': _vm.level === 1}},_vm._l((_vm.headings),function(heading){return _c('li',{key:heading.title,class:[_vm.levelClass]},[_c('div',{staticClass:\"content-item-wrapper\",class:{active: heading.isActive}},[_c('div',{staticClass:\"table-marker\"}),_c('a',{class:[_vm.levelClass],attrs:{\"href\":'#' + heading.title}},[_vm._v(_vm._s(heading.title))])]),(heading.subHeadings && heading.subHeadings.length)?_c('content-table',{attrs:{\"headings\":heading.subHeadings,\"level\":_vm.level + 1}}):_vm._e()],1)}))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul\r\n    class=\"content-table\"\r\n    :class=\"{'content-table-wrapper': level === 1}\"\r\n  >\r\n    <li\r\n      :class=\"[levelClass]\"\r\n      v-for=\"heading in headings\"\r\n      :key=\"heading.title\"\r\n    > \r\n    <div class=\"content-item-wrapper\" :class=\"{active: heading.isActive}\">\r\n      <div class=\"table-marker\"></div>\r\n      <a\r\n        :class=\"[levelClass]\"\r\n        :href=\"'#' + heading.title\"\r\n      >{{heading.title}}</a>\r\n    </div>\r\n      <content-table\r\n        v-if=\"heading.subHeadings && heading.subHeadings.length\"\r\n        :headings=\"heading.subHeadings\"\r\n        :level=\"level + 1\"\r\n      ></content-table>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'content-table',\r\n  props: {\r\n    headings: Array,\r\n    level: {\r\n      default: 1,\r\n      type: Number\r\n    }\r\n  },\r\n  computed: {\r\n    levelClass () {\r\n      return `lvl-${this.level}-item`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import (reference) \"~style/common\";\r\n\r\n.content-table {\r\n  position: sticky;\r\n  top: 30px;\r\n  list-style-type: none;\r\n  display: flex;\r\n  flex-flow: column;\r\n  a {\r\n    display: block;\r\n    text-decoration: none;\r\n    color: #333;\r\n    padding: 4px 0 4px 12px;\r\n  }\r\n}\r\n\r\n.content-table-wrapper {\r\n  margin-left: 3px;\r\n  padding-left: 13px;\r\n  border-left: 2px solid rgba(235, 235, 235, 0.5);\r\n}\r\n\r\n.content-item-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  \r\n  &.active, &:hover{\r\n    background: #ebedef;\r\n    a {\r\n      color: @active-color;\r\n    }\r\n  }\r\n}\r\n\r\n.content-item {\r\n  margin-top: 10px;\r\n}\r\n\r\nli {\r\n  &.lvl-1-item {\r\n    font-size: 1.167rem;\r\n    line-height: 1.3;\r\n    font-weight: 600;\r\n    color: #000;\r\n\r\n    .table-marker {\r\n      width: 5px;\r\n      height: 5px;\r\n      border-radius: 50%;\r\n      background-color: #333;\r\n    }\r\n  }\r\n  &.lvl-2-item {\r\n    font-weight: 400;\r\n    color: #300;\r\n    .content-item-wrapper {\r\n      padding-left: 30px;\r\n    }\r\n\r\n    .table-marker {\r\n      width: 3px;\r\n      height: 3px;\r\n      border-radius: 50%;\r\n      background-color: #333;\r\n    }\r\n  }\r\n  &.lvl-3-item {\r\n    .content-item-wrapper {\r\n      padding-left: 50px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContentTable.vue?vue&type=template&id=5486b68c&\"\nimport script from \"./ContentTable.vue?vue&type=script&lang=js&\"\nexport * from \"./ContentTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContentTable.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ContentTable.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"contentViewerWrapper\",staticClass:\"content-viewer-wrapper\"},[_c('h1',[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"content-viewer-content\",domProps:{\"innerHTML\":_vm._s(_vm.content)}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const debounce = (fn, interval, config) => {\r\n  let lastCallTime = new Date()\r\n  const maxInterval = config.maxWait || interval\r\n  return () => {\r\n    clearTimeout(fn.tid)\r\n    const now = new Date()\r\n    if (now - lastCallTime >= maxInterval) {\r\n      fn()\r\n      lastCallTime = now\r\n    } else {\r\n      fn.tid = setTimeout(fn, interval)\r\n    }\r\n  }\r\n}\r\n\r\nexport default debounce\r\n","<template>\r\n  <div\r\n    ref=\"contentViewerWrapper\"\r\n    class=\"content-viewer-wrapper\"\r\n  >\r\n    <h1>{{title}}</h1>\r\n    <div\r\n      v-html=\"content\"\r\n      class=\"content-viewer-content\"\r\n    >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport debounce from 'libs/debounce'\r\n\r\nexport default {\r\n  props: ['content', 'title'],\r\n  data () {\r\n    return {\r\n      offsets: [],\r\n      targets: [],\r\n      activeTargetIdx: 0,\r\n      onScrollHandler: null,\r\n    }\r\n  },\r\n  methods: {\r\n    parseHeadingPosition () {\r\n      this.offsets = []\r\n      this.targets = []\r\n      const headings = document.querySelectorAll('h2, h3, h4')\r\n      headings.forEach(elem => {\r\n        elem.setAttribute('id', elem.innerHTML)\r\n        this.offsets.push(elem.offsetTop)\r\n        this.targets.push(elem.innerHTML)\r\n      })\r\n    },\r\n    notifyActiveHeading () {\r\n      this.$emit('active-heading-change', this.targets[this.activeTargetIdx])\r\n    }\r\n  },\r\n  watch: {\r\n    activeTargetIdx (oldVal, newVal) {\r\n      if (oldVal !== newVal) {\r\n        this.notifyActiveHeading()\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.parseHeadingPosition()\r\n    const onScroll = () => {\r\n      const scrollY = window.scrollY\r\n      const offsets = this.offsets\r\n      const numHeadings = offsets.length\r\n      let activeTargetIdx = this.activeTargetIdx\r\n      if (activeTargetIdx + 1 < numHeadings && offsets[activeTargetIdx + 1] < scrollY) {\r\n        while (activeTargetIdx + 1 < numHeadings && offsets[activeTargetIdx + 1] < scrollY) {\r\n          activeTargetIdx++\r\n        }\r\n      }\r\n      if (activeTargetIdx > 0 && offsets[activeTargetIdx] > scrollY) {\r\n        while (activeTargetIdx > 0 && offsets[activeTargetIdx] > scrollY) {\r\n          activeTargetIdx--\r\n        }\r\n      }\r\n      this.activeTargetIdx = activeTargetIdx\r\n    }\r\n    this.onScrollHandler = debounce(onScroll, 50, { maxWait: 70 })\r\n    window.addEventListener('scroll', this.onScrollHandler, true)\r\n  },\r\n\r\n  updated () {\r\n    // Reparse headings for updated document\r\n    this.parseHeadingPosition()\r\n    this.onScrollHandler()\r\n    this.notifyActiveHeading()\r\n  },\r\n\r\n  beforeDestroy () {\r\n    window.removeEventListener('scroll', this.onScrollHandler)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.content-viewer-wrapper {\r\n  word-break: break-word;\r\n  font-size: 15px;\r\n  font-weight: 400;\r\n  padding: 10px 20px;\r\n  background: #ffffff;\r\n\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5 {\r\n    color: #333;\r\n    line-height: 1.5;\r\n    margin-bottom: 10px;\r\n    padding-bottom: 5px;\r\n  }\r\n\r\n  h1 {\r\n    margin: 0.67em 0;\r\n    font-size: 2.5rem;\r\n    font-weight: 700;\r\n    line-height: 1.5;\r\n  }\r\n\r\n  h2 {\r\n    padding-bottom: 12px;\r\n    font-size: 24px;\r\n    border-bottom: 1px solid #ececec;\r\n  }\r\n\r\n  h3 {\r\n    font-size: 16px;\r\n  }\r\n\r\n  p {\r\n    margin: 22px 0;\r\n  }\r\n\r\n  blockquote {\r\n    color: #666;\r\n    margin: 22px 0;\r\n    padding: 1px 23px;\r\n    background: #f8f8f8;\r\n    border-left: 4px solid #cbcbcb;\r\n    p {\r\n      margin: 10px 0;\r\n    }\r\n  }\r\n\r\n  strong {\r\n    font-weight: 700;\r\n  }\r\n\r\n  a {\r\n    border-bottom: 1px solid #d1e9ff;\r\n\r\n    color: #0269c8;\r\n    text-decoration: none;\r\n  }\r\n\r\n  code,\r\n  pre {\r\n    font-family: Menlo, Monaco, Consolas, Courier New, monospace;\r\n  }\r\n  code {\r\n    background-color: #fff5f5;\r\n    color: #ff502c;\r\n    font-size: 0.87em;\r\n    padding: 0.065em 0.4em;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContentViewer.vue?vue&type=template&id=221928d8&\"\nimport script from \"./ContentViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./ContentViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContentViewer.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ContentViewer.vue\"\nexport default component.exports","let uid = 1\r\n\r\nconst createHeading = (title, identifier, subHeadings = []) => {\r\n  return {\r\n    title,\r\n    identifier,\r\n    subHeadings,\r\n    isActive: false\r\n  }\r\n}\r\n\r\nconst parseHeadings = (htmlFrag, currLvl = 2) => {\r\n  const reg = new RegExp(`<h${currLvl}.*?>(.*?)</h${currLvl}>`, 'g')\r\n\r\n  const res = []\r\n  let lastMatchEnd = null\r\n  let match = reg.exec(htmlFrag)\r\n  // worked! But it is too confusing\r\n\r\n  const updateSubHeadingsOfLastMatch = () => {\r\n    if (lastMatchEnd) {\r\n      const lastMatch = res[res.length - 1]\r\n      // Recursive\r\n      lastMatch.subHeadings = parseHeadings(\r\n        htmlFrag.slice(lastMatchEnd, match ? match.index : undefined),\r\n        currLvl + 1\r\n      )\r\n    }\r\n  }\r\n  while (match) {\r\n    // dealing current level\r\n    updateSubHeadingsOfLastMatch()\r\n    res.push(createHeading(match[1], `heading-${uid++}`))\r\n    lastMatchEnd = reg.lastIndex\r\n    match = reg.exec(htmlFrag)\r\n  }\r\n\r\n  updateSubHeadingsOfLastMatch()\r\n\r\n  return res\r\n}\r\n\r\nexport default parseHeadings\r\n","<template>\r\n<div class=\"post-wrapper\">\r\n  <div class=\"post-left-col\">\r\n    <content-viewer :title=\"title\" :content=\"content\" @active-heading-change=\"onActiveHeadingChange\"></content-viewer>\r\n  </div>\r\n  <div class=\"post-right-col\">\r\n    <content-table :headings=\"headings\"></content-table>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport ContentTable from 'business/content-table/ContentTable.vue'\r\nimport ContentViewer from 'business/content-viewer/ContentViewer.vue'\r\n\r\nimport parseHeadings from 'libs/heading-parser'\r\nimport { PostApi } from 'api'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      headings: [],\r\n      content: '',\r\n      title: '',\r\n      activeHeading: null,\r\n      headingMap: {}\r\n    }\r\n  },\r\n  components: {\r\n    ContentTable,\r\n    ContentViewer\r\n  },\r\n\r\n  methods: {\r\n    onActiveHeadingChange(heading) {\r\n      if(this.activeHeading) {\r\n        this.activeHeading.isActive = false\r\n      }\r\n      this.headingMap[heading].isActive = true\r\n      this.activeHeading = this.headingMap[heading]\r\n    }\r\n  },\r\n\r\n  async created() {\r\n    const dfs = (node) => {\r\n      node.forEach(elem => {\r\n        this.headingMap[elem.title] = elem\r\n        dfs(elem.subHeadings)\r\n      })\r\n    }\r\n    const post = await PostApi.getPost(this.$route.params.id)\r\n    this.headings = parseHeadings(post.content)\r\n    this.content = post.content\r\n    this.title = post.title\r\n    dfs(this.headings)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.post-wrapper {\r\n  display: flex;\r\n  max-width: 980px;\r\n  margin: 0 auto;\r\n  margin-top: 30px;\r\n  justify-content: space-between;\r\n}\r\n\r\n.post-left-col {\r\n  flex: 1 1 auto;\r\n  margin-right: 30px;\r\n}\r\n\r\n.post-right-col {\r\n  width: 240px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Post.vue?vue&type=template&id=1a384dea&\"\nimport script from \"./Post.vue?vue&type=script&lang=js&\"\nexport * from \"./Post.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Post.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Post.vue\"\nexport default component.exports","var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentViewer.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentViewer.vue?vue&type=style&index=0&lang=less&\"","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}